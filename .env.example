# Discord Bot & Web Admin Configuration
# Copy this file to .env and fill in your actual values

# ============================================================================
# REQUIRED - Discord Credentials (Secrets)
# ============================================================================
# Get from: https://discord.com/developers/applications

DISCORD_TOKEN=your_discord_bot_token_here
DISCORD_CLIENT_ID=your_client_id_here
DISCORD_CLIENT_SECRET=your_client_secret_here

# ============================================================================
# REQUIRED - Deployment Configuration
# ============================================================================

# Public URL - Single source of truth for all external URLs
# Development: http://localhost:8081
# Production:  https://your-domain.com (or http://your-ip)
#
# OAuth redirect URIs are derived automatically:
#   - /auth/callback     (user login)
#   - /auth/bot-callback (bot invite)
#
# Register BOTH in Discord Developer Portal → OAuth2 → Redirects
PUBLIC_URL=http://localhost:8081

# Session Secret (Required for Web Admin)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SESSION_SECRET=dev_only_change_me_in_production

# Internal API Key (Required for production)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
# Leave blank in development (set ENV=dev instead)
INTERNAL_API_KEY=

# ============================================================================
# OPTIONAL - Environment & Behavior
# ============================================================================

# Environment Mode
# Options: development (default), production, dev, test
# In dev/test: INTERNAL_API_KEY not required, debug features enabled
# In production: INTERNAL_API_KEY required, secure defaults
# ENV=development

# Bot Owner IDs (comma-separated list for superuser access)
# BOT_OWNER_IDS=123456789,987654321

# Internal API host/port (defaults: 127.0.0.1:8082)
# INTERNAL_API_HOST=127.0.0.1
# INTERNAL_API_PORT=8082

# Frontend dev server port (only used when ENV=dev/development)
# FRONTEND_PORT=5173

# Cookie Settings (auto-detected from PUBLIC_URL scheme)
# COOKIE_SECURE=true  # Auto: true if PUBLIC_URL uses https://
# COOKIE_SAMESITE=lax

# ============================================================================
# OPTIONAL - Feature Flags
# ============================================================================

# Config path override (defaults to config/config.yaml)
# CONFIG_PATH=config/config.yaml

# Prefix normalization mode
# PREFIX_NORMALIZATION_MODE=enforce

# Role validation cache TTL (seconds)
# ROLE_VALIDATION_TTL=30

# Test mode - prevents bot login (testing only)
# TESTBOT_DRY_RUN=1

# ============================================================================
# Notes
# ============================================================================
# - PUBLIC_URL replaces: DISCORD_REDIRECT_URI, DISCORD_BOT_REDIRECT_URI,
#   FRONTEND_URL, VITE_API_BASE (all derived automatically)
# - Database, logging, rate limits, voice settings → config/config.yaml
# - Secrets (tokens, keys) → .env only
# - Keep .env out of version control!
